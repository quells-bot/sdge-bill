{% extends "base.html" %}

{% block content %}
<div class="bills-page">
  <div class="page-header">
    <h1>Utility Bills</h1>
    <a href="/add" class="btn-add">+ Add Bill</a>
  </div>

  {% if bills|length == 0 %}
    <div class="empty-state">
      <p>No bills recorded yet.</p>
      <a href="/add" class="btn-add">Add your first bill</a>
    </div>
  {% else %}
    <div class="bills-list">
      {% for bill in bills %}
        <div class="bill-card">
          <div class="bill-header">
            <span class="bill-date">{{ bill.date|format_date }}</span>
            <span class="bill-total">{{ bill|total_cost|format_currency }}</span>
          </div>

          <div class="bill-details">
            <div class="detail-row">
              <span class="detail-label">Gas:</span>
              <span class="detail-value">
                {{ bill.gas_cost|format_currency }} ({{ bill.gas_therms or 0 }} therms)
              </span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Elec. Delivery:</span>
              <span class="detail-value">{{ bill.electricity_delivery_cost|format_currency }}</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Elec. Generation:</span>
              <span class="detail-value">{{ bill.electricity_generation_cost|format_currency }}</span>
            </div>
            {% if bill.other_cost != 0 %}
              <div class="detail-row">
                <span class="detail-label">Other:</span>
                <span class="detail-value">{{ bill.other_cost|format_currency }}</span>
              </div>
            {% endif %}
            <div class="detail-row">
              <span class="detail-label">Electricity Usage:</span>
              <span class="detail-value">{{ bill|total_kwh|int }} kWh</span>
            </div>
          </div>

          <div class="bill-actions">
            <a href="/edit/{{ bill.id }}" class="btn-edit">Edit</a>
            <button
              hx-delete="/api/bills/{{ bill.id }}"
              hx-confirm="Are you sure you want to delete this bill?"
              hx-target="closest .bill-card"
              hx-swap="outerHTML"
              class="btn-delete">
              Delete
            </button>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</div>
{% endblock %}
